<nav class="navbar navbar-expand-lg navbar-dark bg-dark"> 
  <a class="navbar-brand" href="#">
    <span class="online-tour">OnlineTravel</span>
    <span class="guide">Guide</span>
  </a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item"><a class="nav-link" routerLink="/home">Home</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/accommodation">Accommodations</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/gallery">Gallery</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/feedback">Feedback</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/agent-reg">Agent Registration</a></li>
      <li class="nav-item"><a class="nav-link" routerLink="/admin">Admin</a></li>
    </ul>

    <!-- Search Bar -->
    <form class="form-inline my-2 my-lg-0">
      <div class="search-bar position-relative">
        <i class="fas fa-search"></i>
        <input
          class="form-control mr-sm-2"
          type="search"
          #speechToText
          placeholder="Search or speak place name here"
          aria-label="Search"
          (keydown.enter)="onEnter($event)"
        />
        <i class="fas fa-microphone" (click)="record()"></i>
      </div>
    </form>

    <!-- Conditionally Show Login/Register or User Dropdown -->
    <ul class="navbar-nav ml-auto">
      <!-- Login/Register Button -->
      <li class="nav-item" *ngIf="!isLoggedIn">
        <a class="nav-link btn btn-outline-light" (click)="toggleLoginDropdown()">Login/Register</a>
      </li>

      <!-- User Dropdown -->
      <li class="nav-item dropdown" *ngIf="isLoggedIn">
        <a
          class="nav-link dropdown-toggle"
          href="#"
          id="userDropdown"
          role="button"
          data-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
          <i class="fas fa-user"></i> User
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
          <a class="dropdown-item" routerLink="profile"><i class="fas fa-user"></i> Profile</a>
          <a class="dropdown-item" routerLink="notifications"><i class="fas fa-bell"></i> Notifications</a>
          <a class="dropdown-item" routerLink="bookings"><i class="fas fa-suitcase"></i> Bookings</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#" (click)="logOut()"><i class="fas fa-sign-out-alt"></i> Log Out</a>
        </div>
      </li>
    </ul>
  </div>
</nav>

<!-- Login/Register Dropdown -->
<div class="login-dropdown" id="login-dropdown-container" *ngIf="showLoginDropdown">
  <div class="login-container">
    <span class="close-button" (click)="closeLoginDropdown()">&times;</span>
    <h2 class="login-title">Login</h2>
    <form id="login-form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="username" class="form-label">Username:</label>
        <input
          type="text"
          [(ngModel)]="username"
          name="username"
          class="form-input"
          placeholder="Enter your username here"
          required
        />
      </div>
      <div class="form-group">
        <label for="password" class="form-label">Password:</label>
        <div class="password-container">
          <input
            type="password"
            [(ngModel)]="password"
            name="password"
            [type]="showPassword ? 'text' : 'password'"
            class="form-input"
            placeholder="Enter your password"
            required
          />
          <span class="eye-icon" (click)="togglePassword()" id="toggle-password">
            <i class="fas" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </span>
        </div>
      </div>
      <button type="submit" class="login-button" id="login-button">Login</button>
      <!-- Forgot Password Link -->
      <div class="forgot-password" style="text-align: right; margin-top: 10px;">
        <a routerLink="/forgot-password">Forgot Password?</a>
      </div>
    </form>
    <div class="register-link">
      <p>New user? <a routerLink="/reg">Register</a></p>
    </div>
  </div>
</div>

<router-outlet></router-outlet>
